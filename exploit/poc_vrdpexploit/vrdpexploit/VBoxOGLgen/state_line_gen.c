/* This code is AUTOGENERATED!!! */

#include "state.h"
#include "state_internals.h"

void crStateLineDiff(CRLineBits *b, CRbitvalue *bitID,
		CRContext *fromCtx, CRContext *toCtx)
{
	CRLineState *from = &(fromCtx->line);
	CRLineState *to = &(toCtx->line);
	unsigned int j, i;
	CRbitvalue nbitID[CR_MAX_BITARRAY];
	for (j = 0; j<CR_MAX_BITARRAY; j++)
		nbitID[j] = ~bitID[j];
	i = 0; /* silence compiler */
	if (CHECKDIRTY(b->enable, bitID))
	{
		glAble able[2];
		able[0] = diff_api.Disable;
		able[1] = diff_api.Enable;
		if (from->lineSmooth != to->lineSmooth)
		{
			able[to->lineSmooth](GL_LINE_SMOOTH);
			from->lineSmooth = to->lineSmooth;
		}
		if (from->lineStipple != to->lineStipple)
		{
			able[to->lineStipple](GL_LINE_STIPPLE);
			from->lineStipple = to->lineStipple;
		}
		CLEARDIRTY(b->enable, nbitID);
	}
	if (CHECKDIRTY(b->width, bitID))
	{
		if (from->width != to->width)
		{
			diff_api.LineWidth(to->width);
			from->width = to->width;
		}
		CLEARDIRTY(b->width, nbitID);
	}
	if (to->lineStipple)
	{
		if (CHECKDIRTY(b->stipple, bitID))
		{
			if (from->repeat != to->repeat ||
			    from->pattern != to->pattern)
			{
				diff_api.LineStipple(to->repeat,
				    to->pattern);
				from->repeat = to->repeat;
				from->pattern = to->pattern;
			}
			CLEARDIRTY(b->stipple, nbitID);
		}
	} /*lineStipple*/
	CLEARDIRTY(b->dirty, nbitID);
}

void crStateLineSwitch(CRLineBits *b, CRbitvalue *bitID,
		CRContext *fromCtx, CRContext *toCtx)
{
	CRLineState *from = &(fromCtx->line);
	CRLineState *to = &(toCtx->line);
	unsigned int j, i;
	CRbitvalue nbitID[CR_MAX_BITARRAY];
	for (j = 0; j<CR_MAX_BITARRAY; j++)
		nbitID[j] = ~bitID[j];
	i = 0; /* silence compiler */
	if (CHECKDIRTY(b->enable, bitID))
	{
		glAble able[2];
		able[0] = diff_api.Disable;
		able[1] = diff_api.Enable;
		if (from->lineSmooth != to->lineSmooth)
		{
			able[to->lineSmooth](GL_LINE_SMOOTH);
			FILLDIRTY(b->enable);
			FILLDIRTY(b->dirty);
		}
		if (from->lineStipple != to->lineStipple)
		{
			able[to->lineStipple](GL_LINE_STIPPLE);
			FILLDIRTY(b->enable);
			FILLDIRTY(b->dirty);
		}
		CLEARDIRTY(b->enable, nbitID);
	}
	if (CHECKDIRTY(b->width, bitID))
	{
		if (from->width != to->width)
		{
			diff_api.LineWidth(to->width);
			FILLDIRTY(b->width);
			FILLDIRTY(b->dirty);
		}
		CLEARDIRTY(b->width, nbitID);
	}
	if (CHECKDIRTY(b->stipple, bitID))
	{
		if (from->repeat != to->repeat ||
		    from->pattern != to->pattern)
		{
			diff_api.LineStipple(to->repeat,
			    to->pattern);
			FILLDIRTY(b->stipple);
			FILLDIRTY(b->dirty);
		}
		CLEARDIRTY(b->stipple, nbitID);
	}
	CLEARDIRTY(b->dirty, nbitID);
}

